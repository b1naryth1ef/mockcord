language: d

before_install:
  - sudo apt-get update -qq
  - wget http://ftp.us.debian.org/debian/pool/main/o/opus/libopus0_1.1-2_amd64.deb
  - wget http://ftp.us.debian.org/debian/pool/main/o/opus/libopus-dev_1.1-2_amd64.deb
  - wget http://ftp.us.debian.org/debian/pool/main/libs/libsodium/libsodium18_1.0.11-1_amd64.deb
  - wget http://ftp.us.debian.org/debian/pool/main/libs/libsodium/libsodium-dev_1.0.11-1_amd64.deb
  - sudo dpkg -i *.deb
  - dub upgrade

script: dub build --compiler=${DC}

d:
  - dmd
  - dmd-2.072.2
  - dmd-2.071.2

deploy:
  provider: releases
  api_key:
    secure: CttT3iWcEh+Ew4h5lAsLqLB9ady6Meb2GGYNHiQg7cQA180DvCAYDQYgT56yf92grl7zyNJdXczeKO0K9PpK79Y3QGkrsCn6To2InZoKJ+dnOU2dARKOWlCxsGNsxi9ALILO6SBs4ySnMZU9SDT4Yy+LbPPwta8jY0gFF/pN2cra93NsDhDr89BMsYNCkIrWBeEVGb0uEafsBHSgtqY6C2pZvBD7zQmG7+WLWon8BNiXWN1UOr9gpLwtny2Clo/ByFmYisKzRC4tw2zVcHeyyFsJ434oAtPDhVTFxYz4xKWl1EPhKToTwFGFluOEbLV2jJHtsZaP2R8Bn1kImHYGB6xx6T1ruq4crz71DYzoOqSAILeKJxurtEOBsNYQ3cTWtcG2PoXdvXZwOogOeegr/ACvM2R0BELD+SYHLV3ccc8luqp3NJMOAKjhfu6+8XS6jzmvVC9wdtrhwIv8c6B2TWOmwPgCfS14xRvucKKDvaSkzynLpgz/bnHB0RDT9xMrnDjI9cKeUVXLfvuQAwRmjrlH5+bQ30YuE990XIe4AKuuP2rqZkdRl3kgA6tQ3jmsH5QemmtZDmRKaTSI4k7CuzG7OJjL2Mwl7dEB584ofmrER3q1f5LINiLn+suK19RUbP2U8OMt2AKojEwFynb63/GuYaRh4YhkovE5X/mTTdo=
  file: mockcord
  on:
    tags: true
    repo: b1naryth1ef/mockcord
